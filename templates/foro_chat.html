<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Asistente IA AcadÃ©mico</title>
  <link rel="stylesheet" href="/static/foro_chat.css" />

  <!-- ğŸ“‘ Parser de Markdown (para que se vea bien el anÃ¡lisis IA) -->
  <script type="module">
    import { marked } from "https://cdn.jsdelivr.net/npm/marked/lib/marked.esm.js";
    window.marked = marked;  // disponible global para ui.js
  </script>

  <!-- ğŸš€ Nuevo JS modular -->
  <script type="module" src="/static/app.js"></script>
</head>
<body>
  <header class="header">
    <img src="/static/logo_hospital.png" alt="Logo Hospital" class="header-logo" />
    <h1>Asistente IA para Consultas AcadÃ©micas de Manera Responsable en Entornos Virtuales de Aprendizaje</h1>
    <img src="/static/logo_openlab.png" alt="Logo OpenLab" class="header-logo" />
  </header>

  <!-- âš–ï¸ Banner Ã©tico -->
  <section id="etica-banner" class="info-banner oculto" role="region" aria-label="Uso responsable de IA">
    <p>
      Este asistente usa IA para apoyar, no reemplazar, decisiones. PodÃ©s optar por no usar el anÃ¡lisis automÃ¡tico.      
    </p>
    <label>
      <input type="checkbox" id="consent-ia" />
      Acepto usar anÃ¡lisis IA en mis consultas
    </label>
    <button id="cerrar-banner" type="button" class="alt">Entendido</button>
  </section>

  <main class="card">
    <!-- Selector de curso (siempre visible) -->
    <div>
      <label for="curso">ElegÃ­ un curso:</label>
      <select id="curso" aria-label="Selector de curso"></select>
    </div>

    <!-- BLOQUE DE PREGUNTAS SUGERIDAS -->
    <div id="bloque-estructuradas">
      <label for="faq">Preguntas sugeridas:</label>
      <select id="faq" aria-label="Preguntas sugeridas">
        <option value="">-- ElegÃ­ una pregunta --</option>
      </select>
    </div>

    <!-- BotÃ³n para pasar a modo libre -->
    <div class="botones">
      <button id="btn-otra" class="alt" type="button" onclick="setModoLibre(true)">âœï¸ Hacer otra pregunta</button>
    </div>

    <!-- Input manual (modo libre) -->
    <div id="manual-group" class="oculto" aria-hidden="true">
      <label for="pregunta">EscribÃ­ tu consulta:</label>
      <input
        type="text"
        id="pregunta"
        placeholder="Ej.: Â¿CuÃ¡ntos foros hay? / Alumnos del curso AnatomÃ­a I"
        autocomplete="off"
      />
    </div>

    <!-- Controles de listado -->
    <div class="botones" aria-label="Controles de listado">
      <label for="page-size" class="lbl-inline">Filas por pÃ¡gina:</label>
      <select id="page-size" aria-label="Filas por pÃ¡gina">
        <option>50</option>
        <option selected>100</option>
        <option>200</option>
        <option>500</option>
      </select>
    </div>

    <!-- Botones normales (modo sugeridas) -->
    <div id="botones-normales" class="botones">
      <button id="btn-enviar" class="enviar" type="button" onclick="enviarPregunta()">ğŸ“¥ Enviar</button>
      <button id="btn-limpiar" class="limpiar" type="button" onclick="limpiar()">ğŸ§¹ Limpiar</button>
    </div>

    <!-- Botones modo libre -->
    <div id="botones-libres" class="botones oculto">
      <button id="btn-volver" class="alt" type="button" onclick="setModoLibre(false)">â† Volver</button>
      <button id="btn-enviar-libre" class="enviar" type="button" onclick="enviarPregunta()">ğŸ“¥ Enviar</button>
      <button id="btn-limpiar-libre" class="limpiar" type="button" onclick="limpiar()">ğŸ§¹ Limpiar</button>
    </div>

    <!-- Respuesta -->
    <div id="respuesta" class="respuesta" role="region" aria-live="polite"></div>

    <!-- Consulta generada -->
    <div id="query-sql" class="query-sql oculto" aria-hidden="true"></div>

    <!-- Ayuda -->
    <div class="faq-footer">
      <button id="btn-ayuda" type="button" onclick="toggleFAQ()">Â¿CÃ³mo funciona este asistente?</button>
    </div>

    <div id="instrucciones" class="instrucciones oculto" aria-hidden="true">
      <h3>Â¿CÃ³mo funciona este asistente?</h3>
      <ul>
        <li>PodÃ©s elegir una pregunta frecuente o escribir tu consulta en lenguaje natural.</li>
        <li>El sistema busca coincidencias con consultas predefinidas y, si no las encuentra, sugiere las mÃ¡s cercanas.</li>
        <li>Algunas preguntas requieren el uso de inteligencia artificial para analizar participaciÃ³n, mensajes o tendencias. En esos casos se pedirÃ¡ tu consentimiento expreso.</li>
        <li>Los datos se procesan de manera anÃ³nima y no se guardan identificadores personales, salvo que decidas registrar la interacciÃ³n.</li>
        <li>Si no recibÃ­s respuesta, puede deberse a bloqueos de red (antivirus, firewall o puertos cerrados en tu instituciÃ³n).</li>
        <li>Este asistente se enmarca en la <a href="https://www.argentina.gob.ar/sites/default/files/guia_ai-final-2025.pdf" target="_blank">GuÃ­a Nacional de Uso Responsable de IAGen</a> y en las <a href="https://unesdoc.unesco.org/ark:/48223/pf0000381137_spa" target="_blank">recomendaciones Ã©ticas de la UNESCO</a>.</li>
        <li>En consultas sensibles (Ã©tica, privacidad, conducta), se priorizan la transparencia, la equidad, la no discriminaciÃ³n y la protecciÃ³n de derechos humanos. Las respuestas son sugerencias y requieren siempre revisiÃ³n docente.</li>
      </ul>
    </div>

    <!-- AutorizaciÃ³n -->
    <div class="checkbox-autorizacion">
      <label for="guardar">
        <input type="checkbox" id="guardar" />
        Autorizo que se registren mis consultas de manera anÃ³nima para mejorar este asistente.
      </label>
    </div>
  </main>

  <footer>
    Sala de Docencia e InvestigaciÃ³n â€“ Hospital Larrain de Berisso | OpenLab â€“ Comunidad de IA Responsable y CÃ³digo Abierto
  </footer>
</body>
</html>


